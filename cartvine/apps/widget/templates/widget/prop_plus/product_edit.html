{% extends 'widget/widget_edit.html' %}
{% load i18n templatetag_handlebars product_tags %}
{% load url from future %}

{% block title %}{% trans 'Product Detail' %} - {{ object.name }}{% endblock %}

{% block pre-body %}
    <span class="pull-right"><a href="{{ object.shop.url }}{{ object.shopify_url }}" class="btn">{% trans 'View in Shopify' %}</a></span>
    <h2>{{ object.name }}</h2>
{% endblock %}

{% block body %}
<div class="main">
    <div class="row">
        <div class="span9">
            <div class="widget widget-table">
                <div class="widget-header">
                    <span class="icon-list-alt"></span>
                    <h3>{% trans 'Product Properties' %}</h3>
                    <button type="edit" class="btn btn-warning pull-right" data-toggle="modal" href="#editPropertiesModal" >{% trans 'Edit Properties' %}</button>
                </div>                  
                <div class="widget-content">
                    <table class="table table-bordered table-striped">
                        <thead>
                            <tr>                                
                                <th class="span3">{% trans 'Property name' %}</th>
                                <th>{% trans 'Value' %}</th>                                
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="name">{% trans 'Product' %}</td>
                                <td class="value"><span>{{ object.name }}</span></td>
                            </tr>
                            <tr>
                                <td class="name">{% trans 'Product type' %}</td>
                                <td class="value"><span>{{ object.product_type }}</span></td>
                            </tr>
                            <tr>
                                <td class="name">{% trans 'Product vendor' %}</td>
                                <td class="value"><span>{{ object.data.vendor }}</span></td>
                            </tr>
                            {% for property in object.basic_props %}
                            <tr>
                                <td class="name">{{ property.name }}</td>
                                <td class="value">{% for p in property.value %}<span class="label label-info">{{ p }}</span>&nbsp;{% endfor %}</td>
                            </tr>
                            {% endfor %}
                            {% for property in object.properties_plus %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="span3">
            <!-- Product image, taken out for the moment, not critical. 
            <div class="widget">
                                {% if object.featured_image_src %}
                                    <img id="feature-image" src="{{ object.featured_image_src|image_resize:"medium" }}" border="0"/>
                                {% else %}
                                    <img src="http://placehold.it/300x150&text=No Product Thumb">
                                {% endif %}
                                {% for i in object.get_images_src %}
                                    <img class="product image" src="{{ i|image_resize:"medium" }}" border="0"/>
                                {% endfor %}
                                
            </div> -->
            <!--Product description block-->
            <div class="widget">
                <div class="widget-header">
                    <i class="icon-pushpin"></i>
                    <h3>{% trans 'Product Description' %}</h3>
                </div> <!-- /widget-header -->
                <div class="widget-content">
                    {{ object.summary|safe|truncatewords:30 }}
                </div>
            </div>
            <!--Product tags block-->
            <div class="widget">
                <div class="widget-header">
                    <i class="icon-pushpin"></i>
                    <h3>{% trans 'Product Tags' %} </h3>
                </div> <!-- /widget-header -->
                <div class="widget-content">
                    {{ object.data.tags }}
                </div>
            </div>
        </div>
        <div class="span12">
            <div class="widget widget-table">
                <div class="widget-header">
                    <span class="icon-barcode"></span>
                    <h3>{% trans 'Product Inventory' %} (<span data-bind="text: variantsList().length"></span>)</h3>
                </div>
                <div class="widget-content">
					<table class="table table-bordered table-striped table-condensed">
						<thead>
							<tr>
								<th class="cen span1"><input type="checkbox" name="toggle-all-variants" id="toggle-all-variants" data-bind="event: {click: toggleSelectAllVariants}"></th>
								<th>SKU</th>
								<th>Price</th>
								<th>In Stock</th>
								{% for option in object.basic_props %}
								<th>{{ option.name }}</th>
								{% endfor %}
								<th></th>
							</tr>
						</thead>
						<tbody data-bind="foreach: variantsList()">
						    {% for variant in variants %}
						    <tr>
                                <td class="cen"><input type="checkbox"/></td>
                                <td class="value" data-bind="text: sku">{{variant.sku}}</td>
                                <td class="value" data-bind="text: cost">{{variant.cost}}</td>
                                <td class="value" data-bind="text: num_in_stock">{{variant.num_in_stock}}</td>
                                {% for option_id,option in variant.basic_options.iteritems %}
                                <td class="value">{{ option.value }}</td>
                                {% endfor %}
                                <td class="value cen">
                                <a data-toggle="modal" data-variant_pk="{{ variant.pk }}" href="#editVariationModal" class="btn-modal-form btn btn-mini btn-warning">{% trans 'Edit' %}</a>
                                <a href="#" class="btn btn-mini disabled pull-right"><i class="icon-resize-vertical"></i></a>
                                </td>
						    </tr>
						    {% endfor %}
							<tr>
								<td colspan="12"><a data-toggle="modal" data-variant_pk="add" href="#editVariationModal" class="btn-modal-form btn btn-small btn-success pull-right">{% trans 'Add Variation' %}</a></td>
							</tr>
						</tbody>
					</table>
                </div>
            </div>
        </div>
    </div>
</div>


{% include 'product/forms/product_props.html' %}
{% include 'product/forms/variant_props.html' %}

{% endblock %}

